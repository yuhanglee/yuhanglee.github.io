<rss xmlns:atom="http://www.w3.org/2005/Atom" version="2.0"><channel><title>协议 - 分类 | 博客</title><link>https://yuhanglee.github.io/categories/%E5%8D%8F%E8%AE%AE/</link><description>协议 - 分类 | 博客</description><generator>Hugo -- gohugo.io</generator><language>zh-CN</language><copyright>本站内容采用 CC BY-NC-SA 4.0 国际许可协议。</copyright><lastBuildDate>Sun, 19 May 2024 00:00:00 +0000</lastBuildDate><atom:link href="https://yuhanglee.github.io/categories/%E5%8D%8F%E8%AE%AE/" rel="self" type="application/rss+xml"/><item><title>CAN协议</title><link>https://yuhanglee.github.io/posts/can%E5%8D%8F%E8%AE%AE/</link><pubDate>Sun, 19 May 2024 00:00:00 +0000</pubDate><author>liyuhang</author><guid>https://yuhanglee.github.io/posts/can%E5%8D%8F%E8%AE%AE/</guid><description><![CDATA[<div class="featured-image"><img loading="eager" src="https://yuhanglee.github.io/posts/can%E5%8D%8F%E8%AE%AE/images/CAN-bus.jpg" alt="CAN协议" title="CAN是汽车上常用的总线接口。" referrerpolicy="no-referrer"/></div><h2 id="can总线定义" class="heading-element"><span>1 CAN总线定义</span>
  <a href="#can%e6%80%bb%e7%ba%bf%e5%ae%9a%e4%b9%89" class="heading-mark">
    <svg class="octicon octicon-link" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path d="m7.775 3.275 1.25-1.25a3.5 3.5 0 1 1 4.95 4.95l-2.5 2.5a3.5 3.5 0 0 1-4.95 0 .751.751 0 0 1 .018-1.042.751.751 0 0 1 1.042-.018 1.998 1.998 0 0 0 2.83 0l2.5-2.5a2.002 2.002 0 0 0-2.83-2.83l-1.25 1.25a.751.751 0 0 1-1.042-.018.751.751 0 0 1-.018-1.042Zm-4.69 9.64a1.998 1.998 0 0 0 2.83 0l1.25-1.25a.751.751 0 0 1 1.042.018.751.751 0 0 1 .018 1.042l-1.25 1.25a3.5 3.5 0 1 1-4.95-4.95l2.5-2.5a3.5 3.5 0 0 1 4.95 0 .751.751 0 0 1-.018 1.042.751.751 0 0 1-1.042.018 1.998 1.998 0 0 0-2.83 0l-2.5 2.5a1.998 1.998 0 0 0 0 2.83Z"></path></svg>
  </a>
</h2><h3 id="定义" class="heading-element"><span>1.1 定义</span>
  <a href="#%e5%ae%9a%e4%b9%89" class="heading-mark">
    <svg class="octicon octicon-link" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path d="m7.775 3.275 1.25-1.25a3.5 3.5 0 1 1 4.95 4.95l-2.5 2.5a3.5 3.5 0 0 1-4.95 0 .751.751 0 0 1 .018-1.042.751.751 0 0 1 1.042-.018 1.998 1.998 0 0 0 2.83 0l2.5-2.5a2.002 2.002 0 0 0-2.83-2.83l-1.25 1.25a.751.751 0 0 1-1.042-.018.751.751 0 0 1-.018-1.042Zm-4.69 9.64a1.998 1.998 0 0 0 2.83 0l1.25-1.25a.751.751 0 0 1 1.042.018.751.751 0 0 1 .018 1.042l-1.25 1.25a3.5 3.5 0 1 1-4.95-4.95l2.5-2.5a3.5 3.5 0 0 1 4.95 0 .751.751 0 0 1-.018 1.042.751.751 0 0 1-1.042.018 1.998 1.998 0 0 0-2.83 0l-2.5 2.5a1.998 1.998 0 0 0 0 2.83Z"></path></svg>
  </a>
</h3><p><a class="lightgallery" href="images/CAN-bus.jpg?size=large" data-thumbnail="images/CAN-bus.jpg?size=small" data-sub-html="<h2>can协议</h2>"><img loading="lazy" src="images/CAN-bus.jpg" alt="can协议" srcset="images/CAN-bus.jpg?size=small, images/CAN-bus.jpg?size=medium 1.5x, images/CAN-bus.jpg?size=large 2x" data-title="can协议" style="background: url(/images/loading.min.svg) no-repeat center;" onload="this.title=this.dataset.title;for(const i of ['style', 'data-title','onerror','onload']){this.removeAttribute(i);}this.dataset.lazyloaded='';" onerror="this.title=this.dataset.title;for(const i of ['style', 'data-title','onerror','onload']){this.removeAttribute(i);}"/></a></p>
<p>一直都说，CAN总线是汽车上最重要的总线接口之一。那么，CAN总线是什么呢？</p>
<blockquote>
<p>什么是CAN总线?</p>
</blockquote>
<p>你的汽车就像一个人的身体:控制器区域网络(CAN总线)是神经系统，实现通信。反过来，“节点”或“电子控制单元”(ecu)就像身体的一部分，通过CAN总线相互连接。一部分感知到的信息可以与另一部分共享。</p>
<p><figure><a class="lightgallery" href="images/CAR&amp;BUS.jpg?size=large" data-thumbnail="images/CAR&amp;BUS.jpg?size=small" data-sub-html="<h2>can总线</h2><p>hello</p>"><img loading="lazy" src="images/CAR&amp;BUS.jpg" alt="can总线" srcset="images/CAR&amp;BUS.jpg?size=small, images/CAR&amp;BUS.jpg?size=medium 1.5x, images/CAR&amp;BUS.jpg?size=large 2x" data-title="hello" style="background: url(/images/loading.min.svg) no-repeat center;" onload="this.title=this.dataset.title;for(const i of ['style', 'data-title','onerror','onload']){this.removeAttribute(i);}this.dataset.lazyloaded='';" onerror="this.title=this.dataset.title;for(const i of ['style', 'data-title','onerror','onload']){this.removeAttribute(i);}"/></a><figcaption class="image-caption">can总线</figcaption>
  </figure></p>
<blockquote>
<p>什么是ECU</p>
</blockquote>
<p>在汽车CAN总线系统中，ECU可以是发动机控制单元、安全气囊、音响系统等。一辆现代汽车可能有多个ECU，每个ECU都有可能需要与其他网络部分共享的信息。</p>
<p><a class="lightgallery" href="images/ECU_Trans.png?size=large" data-thumbnail="images/ECU_Trans.png?size=small" data-sub-html="<h2>ECU</h2>"><img loading="lazy" src="images/ECU_Trans.png" alt="ECU" srcset="images/ECU_Trans.png?size=small, images/ECU_Trans.png?size=medium 1.5x, images/ECU_Trans.png?size=large 2x" data-title="ECU" style="background: url(/images/loading.min.svg) no-repeat center;" onload="this.title=this.dataset.title;for(const i of ['style', 'data-title','onerror','onload']){this.removeAttribute(i);}this.dataset.lazyloaded='';" onerror="this.title=this.dataset.title;for(const i of ['style', 'data-title','onerror','onload']){this.removeAttribute(i);}"/></a></p>
<p>这就是CAN标准排得上用场的地方：</p>
<ul>
<li>CAN总线可以连接多个ECU，并进行通信</li>
<li>使用双绞线，无复杂的专用布线，网络拓展性强</li>
<li>支持仲裁和抢占，以及可以报告错误帧</li>
<li>支持一对一和一对多通信</li>
</ul>
<h3 id="osi网络" class="heading-element"><span>1.2 OSI网络</span>
  <a href="#osi%e7%bd%91%e7%bb%9c" class="heading-mark">
    <svg class="octicon octicon-link" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path d="m7.775 3.275 1.25-1.25a3.5 3.5 0 1 1 4.95 4.95l-2.5 2.5a3.5 3.5 0 0 1-4.95 0 .751.751 0 0 1 .018-1.042.751.751 0 0 1 1.042-.018 1.998 1.998 0 0 0 2.83 0l2.5-2.5a2.002 2.002 0 0 0-2.83-2.83l-1.25 1.25a.751.751 0 0 1-1.042-.018.751.751 0 0 1-.018-1.042Zm-4.69 9.64a1.998 1.998 0 0 0 2.83 0l1.25-1.25a.751.751 0 0 1 1.042.018.751.751 0 0 1 .018 1.042l-1.25 1.25a3.5 3.5 0 1 1-4.95-4.95l2.5-2.5a3.5 3.5 0 0 1 4.95 0 .751.751 0 0 1-.018 1.042.751.751 0 0 1-1.042.018 1.998 1.998 0 0 0-2.83 0l-2.5 2.5a1.998 1.998 0 0 0 0 2.83Z"></path></svg>
  </a>
</h3><p>用更专业的术语来说，CAN(controller area network)是由数据链路层和物理层来描述，在高速CAN中，<code>ISO 11898-1</code> 描述了数据链路层，<code>ISO 11898-2</code> 描述了物理层，如图所示，CAN的作用经常出现在7层OSI中。</p>
<p>CAN总线物理层定义了电路类型、电信号水平、节点要求、电缆阻抗等。例如：<code>ISO 11898-2</code>规定了许多事情，包括以下内容</p>
<ul>
<li>波特率： CAN节点必须使用两根绞线相连，经典CAN最高可以达到1Mbps，CANFD数据域最高可以达到5Mbps</li>
<li>电缆长度： 最大的长度可以达到 500米（125Kbps）或者40米（1Mbps）</li>
<li>终端： CAN总线两端必须都正确的使用120欧姆终端电阻</li>
</ul>
<p><a class="lightgallery" href="images/OSI-layer.png?size=large" data-thumbnail="images/OSI-layer.png?size=small" data-sub-html="<h2>OSI分层</h2>"><img loading="lazy" src="images/OSI-layer.png" alt="OSI分层" srcset="images/OSI-layer.png?size=small, images/OSI-layer.png?size=medium 1.5x, images/OSI-layer.png?size=large 2x" data-title="OSI分层" style="background: url(/images/loading.min.svg) no-repeat center;" onload="this.title=this.dataset.title;for(const i of ['style', 'data-title','onerror','onload']){this.removeAttribute(i);}this.dataset.lazyloaded='';" onerror="this.title=this.dataset.title;for(const i of ['style', 'data-title','onerror','onload']){this.removeAttribute(i);}"/></a></p>
<h3 id="高速can" class="heading-element"><span>1.3 高速CAN</span>
  <a href="#%e9%ab%98%e9%80%9fcan" class="heading-mark">
    <svg class="octicon octicon-link" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path d="m7.775 3.275 1.25-1.25a3.5 3.5 0 1 1 4.95 4.95l-2.5 2.5a3.5 3.5 0 0 1-4.95 0 .751.751 0 0 1 .018-1.042.751.751 0 0 1 1.042-.018 1.998 1.998 0 0 0 2.83 0l2.5-2.5a2.002 2.002 0 0 0-2.83-2.83l-1.25 1.25a.751.751 0 0 1-1.042-.018.751.751 0 0 1-.018-1.042Zm-4.69 9.64a1.998 1.998 0 0 0 2.83 0l1.25-1.25a.751.751 0 0 1 1.042.018.751.751 0 0 1 .018 1.042l-1.25 1.25a3.5 3.5 0 1 1-4.95-4.95l2.5-2.5a3.5 3.5 0 0 1 4.95 0 .751.751 0 0 1-.018 1.042.751.751 0 0 1-1.042.018 1.998 1.998 0 0 0-2.83 0l-2.5 2.5a1.998 1.998 0 0 0 0 2.83Z"></path></svg>
  </a>
</h3><p>在汽车总线的定义中，会经常遇到不同类型的网络：下面我们提供一个简单的概述：</p>
<ul>
<li>高速CAN总线： 本文的重点是高速CAN总线(ISO 11898)。它是迄今为止物理层最流行的CAN标准协议，波特率支持从40Kbps到1Mbps。只需要简单的双绞线，就可以满足简单的汽车应用。还可以作为OBD，J1939，NMEA 2000，CANOpen等高层协议的基础。第二代CAN被称为CANFD，数据域可以最高支持5Mbps。</li>
<li>低速CAN总线： 该标准支持的波特率较低，为40Kbps到125Kbps，且可以允许在两条总线出现故障之后，继续进行通信。因此，也被称为&quot;容错CAN&quot;。</li>
<li>LIN总线： LIN总线是CAN总线的低成本补充，其只需要3根线就可以完成通信，可以进行更加简单的布线和更经济的网络。</li>
<li>以太网： 当今随着新能源的崛起，车辆功能越来越复杂。新能源车辆以支持ADAS(高级驾驶辅助系统)、信息娱乐系统、摄像头等高带宽要求。与CAN总线相比，汽车以太网提供了更高的数据传入速率，但缺乏经典CAN和CAN FD的一些安全/性能的特征。未来一段时间，CAN、CAN FD、CAN XL和以太网基友可能同事应用于新的汽车和工业开发。</li>
</ul>
<h3 id="can总线优点" class="heading-element"><span>1.4 CAN总线优点</span>
  <a href="#can%e6%80%bb%e7%ba%bf%e4%bc%98%e7%82%b9" class="heading-mark">
    <svg class="octicon octicon-link" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path d="m7.775 3.275 1.25-1.25a3.5 3.5 0 1 1 4.95 4.95l-2.5 2.5a3.5 3.5 0 0 1-4.95 0 .751.751 0 0 1 .018-1.042.751.751 0 0 1 1.042-.018 1.998 1.998 0 0 0 2.83 0l2.5-2.5a2.002 2.002 0 0 0-2.83-2.83l-1.25 1.25a.751.751 0 0 1-1.042-.018.751.751 0 0 1-.018-1.042Zm-4.69 9.64a1.998 1.998 0 0 0 2.83 0l1.25-1.25a.751.751 0 0 1 1.042.018.751.751 0 0 1 .018 1.042l-1.25 1.25a3.5 3.5 0 1 1-4.95-4.95l2.5-2.5a3.5 3.5 0 0 1 4.95 0 .751.751 0 0 1-.018 1.042.751.751 0 0 1-1.042.018 1.998 1.998 0 0 0-2.83 0l-2.5 2.5a1.998 1.998 0 0 0 0 2.83Z"></path></svg>
  </a>
</h3><p>由于CAN总线具有以下优点，CAN总线标准几乎用于所有车辆和许多场景。</p>
<blockquote>
<p>简单，低成本</p>
</blockquote>
<p>ECU可以通过单个CAN系统进行通信，而不使用更加复杂的模拟信号总线，从而减少了错误、复杂、布线、成本。</p>
<blockquote>
<p>集中</p>
</blockquote>
<p>CAN总线提供了与所有ECU网络通信的入口点，且不分主从，可以进行双向通信，从而实现中央诊断、数据记录和配置。</p>
<blockquote>
<p>健壮</p>
</blockquote>
<p>该系统对电气干扰和电磁干扰具有鲁棒性，是安全关键应用的理想选择</p>
<blockquote>
<p>高效</p>
</blockquote>
<p>CAN具有仲裁性，数据报文可以按照ID确定优先级，以便最高优先级的数据得到立即总线访问，而不会导致其他帧的中断。</p>
<h3 id="can-历史" class="heading-element"><span>1.5 CAN 历史</span>
  <a href="#can-%e5%8e%86%e5%8f%b2" class="heading-mark">
    <svg class="octicon octicon-link" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path d="m7.775 3.275 1.25-1.25a3.5 3.5 0 1 1 4.95 4.95l-2.5 2.5a3.5 3.5 0 0 1-4.95 0 .751.751 0 0 1 .018-1.042.751.751 0 0 1 1.042-.018 1.998 1.998 0 0 0 2.83 0l2.5-2.5a2.002 2.002 0 0 0-2.83-2.83l-1.25 1.25a.751.751 0 0 1-1.042-.018.751.751 0 0 1-.018-1.042Zm-4.69 9.64a1.998 1.998 0 0 0 2.83 0l1.25-1.25a.751.751 0 0 1 1.042.018.751.751 0 0 1 .018 1.042l-1.25 1.25a3.5 3.5 0 1 1-4.95-4.95l2.5-2.5a3.5 3.5 0 0 1 4.95 0 .751.751 0 0 1-.018 1.042.751.751 0 0 1-1.042.018 1.998 1.998 0 0 0-2.83 0l-2.5 2.5a1.998 1.998 0 0 0 0 2.83Z"></path></svg>
  </a>
</h3><p>短暂介绍 <code>CAN总线</code> 的历史：</p>
<ul>
<li><code>Pre CAN</code> :  汽车ECU依赖与复杂的点对点总线协议</li>
<li>1986: 博世开发了CAN协议作为一个解决方案</li>
<li>1991: 博世发布了CAN2.0，分为CAN 2.0 A(标准帧，11bit)和CAN 2.0 B(扩展帧，29bit)</li>
<li>1993: CAN 被采纳为国际标准， ISO 11898</li>
<li>2003: ISO11898 变为标准服务</li>
<li>2012: 博世发布CANFD 1.0版本，加入了可变数据速率</li>
<li>2015: CANFD协议被标准化，ISO11898-1</li>
<li>2016: CAN物理层传输速率变为最大5Mbps，ISO11898-2</li>
<li>2018: 开始CAN XL开发</li>
</ul>
<p><a class="lightgallery" href="images/CAN%e6%a0%87%e5%87%86%e5%8f%91%e5%b1%95%e8%bf%87%e7%a8%8b.png?size=large" data-thumbnail="images/CAN标准发展过程.png?size=small" data-sub-html="<h2>CAN标准发展过程</h2>"><img loading="lazy" src="images/CAN%e6%a0%87%e5%87%86%e5%8f%91%e5%b1%95%e8%bf%87%e7%a8%8b.png" alt="CAN标准发展过程" srcset="images/CAN%e6%a0%87%e5%87%86%e5%8f%91%e5%b1%95%e8%bf%87%e7%a8%8b.png?size=small, images/CAN%e6%a0%87%e5%87%86%e5%8f%91%e5%b1%95%e8%bf%87%e7%a8%8b.png?size=medium 1.5x, images/CAN%e6%a0%87%e5%87%86%e5%8f%91%e5%b1%95%e8%bf%87%e7%a8%8b.png?size=large 2x" data-title="CAN标准发展过程" style="background: url(/images/loading.min.svg) no-repeat center;" onload="this.title=this.dataset.title;for(const i of ['style', 'data-title','onerror','onload']){this.removeAttribute(i);}this.dataset.lazyloaded='';" onerror="this.title=this.dataset.title;for(const i of ['style', 'data-title','onerror','onload']){this.removeAttribute(i);}"/></a></p>
<h3 id="can总线的未来" class="heading-element"><span>1.6 CAN总线的未来</span>
  <a href="#can%e6%80%bb%e7%ba%bf%e7%9a%84%e6%9c%aa%e6%9d%a5" class="heading-mark">
    <svg class="octicon octicon-link" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path d="m7.775 3.275 1.25-1.25a3.5 3.5 0 1 1 4.95 4.95l-2.5 2.5a3.5 3.5 0 0 1-4.95 0 .751.751 0 0 1 .018-1.042.751.751 0 0 1 1.042-.018 1.998 1.998 0 0 0 2.83 0l2.5-2.5a2.002 2.002 0 0 0-2.83-2.83l-1.25 1.25a.751.751 0 0 1-1.042-.018.751.751 0 0 1-.018-1.042Zm-4.69 9.64a1.998 1.998 0 0 0 2.83 0l1.25-1.25a.751.751 0 0 1 1.042.018.751.751 0 0 1 .018 1.042l-1.25 1.25a3.5 3.5 0 1 1-4.95-4.95l2.5-2.5a3.5 3.5 0 0 1 4.95 0 .751.751 0 0 1-.018 1.042.751.751 0 0 1-1.042.018 1.998 1.998 0 0 0-2.83 0l-2.5 2.5a1.998 1.998 0 0 0 0 2.83Z"></path></svg>
  </a>
</h3><blockquote>
<p>展望未来，CAN总线协议将保持相关性。</p>
</blockquote>
<p>尽管CAN总线还受到以下主要趋势的影响：</p>
<ul>
<li>对日益先进的车辆功能需求</li>
<li>云计算兴起</li>
<li>物联网（IOT）和联网汽车的增长</li>
<li>自动驾驶汽车的影响</li>
</ul>
<p>特别是互联汽车(V2X)和云计算的兴起，将导致汽车远程信息处理和<code>IOT CAN记录仪</code> 的快速增长。反过来，使CAN总线网络“在线”，也会使得车辆面临一些安全风险，并且可能需要转向新的CAN协议，例如：CAN FD。</p>
<h3 id="canfd" class="heading-element"><span>1.7 CANFD</span>
  <a href="#canfd" class="heading-mark">
    <svg class="octicon octicon-link" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path d="m7.775 3.275 1.25-1.25a3.5 3.5 0 1 1 4.95 4.95l-2.5 2.5a3.5 3.5 0 0 1-4.95 0 .751.751 0 0 1 .018-1.042.751.751 0 0 1 1.042-.018 1.998 1.998 0 0 0 2.83 0l2.5-2.5a2.002 2.002 0 0 0-2.83-2.83l-1.25 1.25a.751.751 0 0 1-1.042-.018.751.751 0 0 1-.018-1.042Zm-4.69 9.64a1.998 1.998 0 0 0 2.83 0l1.25-1.25a.751.751 0 0 1 1.042.018.751.751 0 0 1 .018 1.042l-1.25 1.25a3.5 3.5 0 1 1-4.95-4.95l2.5-2.5a3.5 3.5 0 0 1 4.95 0 .751.751 0 0 1-.018 1.042.751.751 0 0 1-1.042.018 1.998 1.998 0 0 0-2.83 0l-2.5 2.5a1.998 1.998 0 0 0 0 2.83Z"></path></svg>
  </a>
</h3><blockquote>
<p>CAN FD 的定义</p>
</blockquote>
<h3 id="can-fd-的兴起" class="heading-element"><span>1.8 CAN FD 的兴起</span>
  <a href="#can-fd-%e7%9a%84%e5%85%b4%e8%b5%b7" class="heading-mark">
    <svg class="octicon octicon-link" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path d="m7.775 3.275 1.25-1.25a3.5 3.5 0 1 1 4.95 4.95l-2.5 2.5a3.5 3.5 0 0 1-4.95 0 .751.751 0 0 1 .018-1.042.751.751 0 0 1 1.042-.018 1.998 1.998 0 0 0 2.83 0l2.5-2.5a2.002 2.002 0 0 0-2.83-2.83l-1.25 1.25a.751.751 0 0 1-1.042-.018.751.751 0 0 1-.018-1.042Zm-4.69 9.64a1.998 1.998 0 0 0 2.83 0l1.25-1.25a.751.751 0 0 1 1.042.018.751.751 0 0 1 .018 1.042l-1.25 1.25a3.5 3.5 0 1 1-4.95-4.95l2.5-2.5a3.5 3.5 0 0 1 4.95 0 .751.751 0 0 1-.018 1.042.751.751 0 0 1-1.042.018 1.998 1.998 0 0 0-2.83 0l-2.5 2.5a1.998 1.998 0 0 0 0 2.83Z"></path></svg>
  </a>
</h3><p>随着车辆功能的扩展，CAN总线的负载也在增加。为了支持这一点，CAN FD 被设计为“下一代”CAN总线。与经典CAN相比，CAN FD 提供了三个好处：</p>
<ul>
<li>支持最高 <code>8M bps</code> 的数据域可变速率</li>
<li>数据域最多支持64个字节传输</li>
<li>通过身份验证提供了安全性</li>
</ul>
<p>简而言之，CAN FD 提高了速度和效率，因此在交心的车辆中得到了推广。同样，这也会对 IOT CAN FD 数据记录器的需求日益增加。</p>
<h2 id="can-报文定义" class="heading-element"><span>2 CAN 报文定义</span>
  <a href="#can-%e6%8a%a5%e6%96%87%e5%ae%9a%e4%b9%89" class="heading-mark">
    <svg class="octicon octicon-link" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path d="m7.775 3.275 1.25-1.25a3.5 3.5 0 1 1 4.95 4.95l-2.5 2.5a3.5 3.5 0 0 1-4.95 0 .751.751 0 0 1 .018-1.042.751.751 0 0 1 1.042-.018 1.998 1.998 0 0 0 2.83 0l2.5-2.5a2.002 2.002 0 0 0-2.83-2.83l-1.25 1.25a.751.751 0 0 1-1.042-.018.751.751 0 0 1-.018-1.042Zm-4.69 9.64a1.998 1.998 0 0 0 2.83 0l1.25-1.25a.751.751 0 0 1 1.042.018.751.751 0 0 1 .018 1.042l-1.25 1.25a3.5 3.5 0 1 1-4.95-4.95l2.5-2.5a3.5 3.5 0 0 1 4.95 0 .751.751 0 0 1-.018 1.042.751.751 0 0 1-1.042.018 1.998 1.998 0 0 0-2.83 0l-2.5 2.5a1.998 1.998 0 0 0 0 2.83Z"></path></svg>
  </a>
</h2><h3 id="什么是can报文定义" class="heading-element"><span>2.1 什么是CAN报文定义</span>
  <a href="#%e4%bb%80%e4%b9%88%e6%98%afcan%e6%8a%a5%e6%96%87%e5%ae%9a%e4%b9%89" class="heading-mark">
    <svg class="octicon octicon-link" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path d="m7.775 3.275 1.25-1.25a3.5 3.5 0 1 1 4.95 4.95l-2.5 2.5a3.5 3.5 0 0 1-4.95 0 .751.751 0 0 1 .018-1.042.751.751 0 0 1 1.042-.018 1.998 1.998 0 0 0 2.83 0l2.5-2.5a2.002 2.002 0 0 0-2.83-2.83l-1.25 1.25a.751.751 0 0 1-1.042-.018.751.751 0 0 1-.018-1.042Zm-4.69 9.64a1.998 1.998 0 0 0 2.83 0l1.25-1.25a.751.751 0 0 1 1.042.018.751.751 0 0 1 .018 1.042l-1.25 1.25a3.5 3.5 0 1 1-4.95-4.95l2.5-2.5a3.5 3.5 0 0 1 4.95 0 .751.751 0 0 1-.018 1.042.751.751 0 0 1-1.042.018 1.998 1.998 0 0 0-2.83 0l-2.5 2.5a1.998 1.998 0 0 0 0 2.83Z"></path></svg>
  </a>
</h3><blockquote>
<p>CAN总线上的 通信是通过CAN报文来定义，通常也会称为CAN报文。</p>
</blockquote>
<p>下图是CAN标准帧(CAN 2.0 A)的位定义，其中包括11bit的标识符(ID)，可以满足大多数汽车使用。扩展帧(CAN 2.0 B)除了标识符更长，达到了29bit，并且EXT需要置为显性电平，其余都和标准帧保持一致。</p>
<p><a class="lightgallery" href="images/CAN%e6%a0%87%e5%87%86%e5%b8%a7%e5%ae%9a%e4%b9%89.png?size=large" data-thumbnail="images/CAN标准帧定义.png?size=small" data-sub-html="<h2>CAN标准帧定义</h2>"><img loading="lazy" src="images/CAN%e6%a0%87%e5%87%86%e5%b8%a7%e5%ae%9a%e4%b9%89.png" alt="CAN标准帧定义" srcset="images/CAN%e6%a0%87%e5%87%86%e5%b8%a7%e5%ae%9a%e4%b9%89.png?size=small, images/CAN%e6%a0%87%e5%87%86%e5%b8%a7%e5%ae%9a%e4%b9%89.png?size=medium 1.5x, images/CAN%e6%a0%87%e5%87%86%e5%b8%a7%e5%ae%9a%e4%b9%89.png?size=large 2x" data-title="CAN标准帧定义" style="background: url(/images/loading.min.svg) no-repeat center;" onload="this.title=this.dataset.title;for(const i of ['style', 'data-title','onerror','onload']){this.removeAttribute(i);}this.dataset.lazyloaded='';" onerror="this.title=this.dataset.title;for(const i of ['style', 'data-title','onerror','onload']){this.removeAttribute(i);}"/></a></p>
<p>各个段的定义和作用如下；</p>
<table>
<thead>
<tr>
<th>起始位</th>
<th>结束位</th>
<th>长度</th>
<th>定义</th>
<th>作用</th>
<th>注意</th>
</tr>
</thead>
<tbody>
<tr>
<td>0</td>
<td>0</td>
<td>1</td>
<td>SOF</td>
<td>起始帧位</td>
<td>始终为 1</td>
</tr>
<tr>
<td>1</td>
<td>11</td>
<td>11</td>
<td>ID</td>
<td>标识符</td>
<td>扩展帧为29位</td>
</tr>
<tr>
<td>12</td>
<td>12</td>
<td>1</td>
<td>RTR</td>
<td>远程帧</td>
<td></td>
</tr>
<tr>
<td>13</td>
<td>18</td>
<td>6</td>
<td>CTRL</td>
<td>控制</td>
<td></td>
</tr>
<tr>
<td>19</td>
<td>84</td>
<td>64</td>
<td>DATA</td>
<td>数据域</td>
<td></td>
</tr>
<tr>
<td>85</td>
<td>100</td>
<td>16</td>
<td>CRC</td>
<td>校验码</td>
<td></td>
</tr>
<tr>
<td>101</td>
<td>102</td>
<td>2</td>
<td>ACK</td>
<td>回应字</td>
<td></td>
</tr>
<tr>
<td>103</td>
<td>109</td>
<td>7</td>
<td>EOF</td>
<td>结束帧</td>
<td></td>
</tr>
</tbody>
</table>
<div class="details admonition warning open">
    <div class="details-summary admonition-title">
      <i class="icon fa-solid fa-exclamation-triangle fa-fw" aria-hidden="true"></i>警告<i class="details-icon fa-solid fa-angle-right fa-fw" aria-hidden="true"></i>
    </div>
    <div class="details-content">
      <div class="admonition-content"><p>ID: CAN 报文发送报文时，是需要获取仲裁权的。<code>ID</code> 数值越小，优先级越高。</p>
<p>控制位：包括 <code>IDE</code> 和 <code>DLC</code>，用来指定扩展帧位和字节长度(0~8)。</p>
</div>
    </div>
  </div>
]]></description></item></channel></rss>