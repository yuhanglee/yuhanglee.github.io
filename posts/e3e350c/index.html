<!doctype html><html itemscope itemtype=http://schema.org/WebPage lang=zh-CN><head><meta charset=utf-8><meta name=viewport content="width=device-width,initial-scale=1,maximum-scale=2"><meta name=robots content="noodp"><title>Zephyr教程-环境配置 | 博客</title><meta name=author content>
<meta name=description content=" quote zephyr 是一个类 Linux 的开发方式， 其工程由 Linux 基金会管理。 "><meta name=keywords content='教程'><meta itemprop=name content="zephyr教程-环境配置"><meta itemprop=description content="quote zephyr 是一个类 Linux 的开发方式， 其工程由 Linux 基金会管理。"><meta itemprop=datePublished content="2025-02-04T22:08:09+08:00"><meta itemprop=dateModified content="2025-03-06T00:35:41+00:00"><meta itemprop=wordCount content="1156"><meta itemprop=image content="https://yuhanglee.github.io/images/apple-devices-preview.webp"><meta itemprop=keywords content="教程"><meta property="og:url" content="https://yuhanglee.github.io/posts/e3e350c/"><meta property="og:site_name" content="博客"><meta property="og:title" content="zephyr教程-环境配置"><meta property="og:description" content="quote zephyr 是一个类 Linux 的开发方式， 其工程由 Linux 基金会管理。"><meta property="og:locale" content="zh_CN"><meta property="og:type" content="article"><meta property="article:section" content="posts"><meta property="article:published_time" content="2025-02-04T22:08:09+08:00"><meta property="article:modified_time" content="2025-03-06T00:35:41+00:00"><meta property="article:tag" content="教程"><meta property="og:image" content="https://yuhanglee.github.io/images/apple-devices-preview.webp"><meta name=twitter:card content="summary_large_image"><meta name=twitter:image content="https://yuhanglee.github.io/images/apple-devices-preview.webp"><meta name=twitter:title content="zephyr教程-环境配置"><meta name=twitter:description content="quote zephyr 是一个类 Linux 的开发方式， 其工程由 Linux 基金会管理。"><meta name=application-name content="以梦为马"><meta name=apple-mobile-web-app-title content="以梦为马"><meta name=theme-color data-light=#ffffff data-dark=#252627 content="#ffffff"><meta name=msapplication-TileColor content="#da532c"><link rel="shortcut icon" type=image/x-icon href=/favicon.ico><link rel=icon type=image/png sizes=32x32 href=/favicon-32x32.png><link rel=icon type=image/png sizes=16x16 href=/favicon-16x16.png><link rel=apple-touch-icon sizes=180x180 href=/apple-touch-icon.png><link rel=mask-icon href=/safari-pinned-tab.svg color=#5bbad5><link rel=manifest href=/site.webmanifest><link rel=canonical type=text/html href=https://yuhanglee.github.io/posts/e3e350c/ title="zephyr教程-环境配置 | 博客"><link rel=prev type=text/html href=https://yuhanglee.github.io/posts/b234ee6/ title="RTT 启动顺序"><link rel=alternate type=text/markdown href=https://yuhanglee.github.io/posts/e3e350c/index.md title="zephyr教程-环境配置 | 博客"><link rel=stylesheet href=/css/style.min.css><link rel=preload href=https://unpkg.com/@fortawesome/fontawesome-free@6.7.1/css/all.min.css as=style onload='this.removeAttribute("onload"),this.rel="stylesheet"'><noscript><link rel=stylesheet href=https://unpkg.com/@fortawesome/fontawesome-free@6.7.1/css/all.min.css></noscript><link rel=preload href=https://unpkg.com/animate.css@4.1.1/animate.min.css as=style onload='this.removeAttribute("onload"),this.rel="stylesheet"'><noscript><link rel=stylesheet href=https://unpkg.com/animate.css@4.1.1/animate.min.css></noscript><script type=application/ld+json>{"@context":"http://schema.org","@type":"BlogPosting","headline":"zephyr教程-环境配置","inLanguage":"zh-CN","mainEntityOfPage":{"@type":"WebPage","@id":"https:\/\/yuhanglee.github.io\/posts\/e3e350c\/"},"image":[{"@type":"ImageObject","url":"https:\/\/yuhanglee.github.io\/images\/apple-devices-preview.webp","width":2880,"height":1508}],"genre":"posts","keywords":"教程","wordcount":1156,"url":"https:\/\/yuhanglee.github.io\/posts\/e3e350c\/","datePublished":"2025-02-04T22:08:09+08:00","dateModified":"2025-03-06T00:35:41+00:00","license":"本站内容采用 CC BY-NC-SA 4.0 国际许可协议。","publisher":{"@type":"Organization","name":"Lruihao","logo":"https:\/\/yuhanglee.github.io\/images\/avatar.jpg"},"description":""}</script><script src=/js/head/color-scheme.min.js></script></head><body data-header-desktop=sticky data-header-mobile=auto><div class=wrapper data-page-style=normal><header class="desktop animate__faster" id=header-desktop><div class=header-wrapper data-github-corner=right><div class=header-title><a href=/ title=博客><img loading=lazy src=/logo.webp alt=博客 data-title=博客 width=26 height=26 class=logo style="background:url(/images/loading.min.svg)no-repeat 50%" onload='this.title=this.dataset.title;for(const e of["style","data-title","onerror","onload"])this.removeAttribute(e);this.dataset.lazyloaded=""' onerror='this.title=this.dataset.title;for(const e of["style","data-title","onerror","onload"])this.removeAttribute(e)'><span class=header-title-text>菠菜众长</span></a><span class=header-subtitle>博客</span></div><nav><ul class=menu><li class="menu-item has-children"><a class=menu-link href=/archives/><i class="fa-solid fa-feather fa-fw fa-sm" aria-hidden=true></i> 文章</a><i class="dropdown-icon fa-solid fa-chevron-down" aria-hidden=true></i><ul class=sub-menu><li class=menu-item><a class=menu-link href=/categories/><i class="fa-solid fa-folder-tree fa-fw fa-sm" aria-hidden=true></i> 分类</a></li><li class=menu-item><a class=menu-link href=/collections/><i class="fa-solid fa-layer-group fa-fw fa-sm" aria-hidden=true></i> 合集</a></li><li class=menu-item><a class=menu-link href=/tags/><i class="fa-solid fa-tags fa-fw fa-sm" aria-hidden=true></i> 标签</a></li></ul></li><li class=menu-item><a class=menu-link href=/friends/ title=友情链接><i class="fa-solid fa-users-viewfinder fa-fw fa-sm" aria-hidden=true></i> 友链</a></li><li class=menu-item><a class=menu-link href=/guestbook/><i class="fa-regular fa-comments fa-fw fa-sm" aria-hidden=true></i> 留言</a></li><li class="menu-item has-children"><a class=menu-link href=/about/><i class="fa-solid fa-quote-left fa-fw fa-sm" aria-hidden=true></i> 关于</a><i class="dropdown-icon fa-solid fa-chevron-down" aria-hidden=true></i><ul class=sub-menu><li class=menu-item><a class=menu-link href=/projects/ title=我的作品集><i class="fa-solid fa-laptop-code fa-fw fa-sm" aria-hidden=true></i> 我的作品</a></li></ul></li><li class="menu-item delimiter"></li><li class="menu-item search" id=search-desktop><input type=text placeholder=搜索文章标题或内容…… id=search-input-desktop>
<a href=javascript:void(0); class="search-button search-toggle" id=search-toggle-desktop title=搜索><i class="fa-solid fa-search fa-fw" aria-hidden=true></i>
</a><a href=javascript:void(0); class="search-button search-clear" id=search-clear-desktop title=清空><i class="fa-solid fa-times-circle fa-fw" aria-hidden=true></i>
</a><span class="search-button search-loading" id=search-loading-desktop><i class="fa-solid fa-spinner fa-fw fa-spin" aria-hidden=true></i></span></li><li class="menu-item theme-switch" title=切换主题><i class="fa-solid fa-adjust fa-fw" aria-hidden=true></i></li></ul></nav></div></header><header class="mobile animate__faster" id=header-mobile><div class=header-container><div class=header-wrapper><div class=header-title><a href=/ title=博客><img loading=lazy src=/logo.webp alt=博客 data-title=博客 width=26 height=26 class=logo style="background:url(/images/loading.min.svg)no-repeat 50%" onload='this.title=this.dataset.title;for(const e of["style","data-title","onerror","onload"])this.removeAttribute(e);this.dataset.lazyloaded=""' onerror='this.title=this.dataset.title;for(const e of["style","data-title","onerror","onload"])this.removeAttribute(e)'><span class=header-title-text>菠菜众长</span></a><span class=header-subtitle>博客</span></div><div class=menu-toggle id=menu-toggle-mobile><span></span><span></span><span></span></div></div><nav><ul class=menu id=menu-mobile><li class=search-wrapper><div class="search mobile" id=search-mobile><input type=text placeholder=搜索文章标题或内容…… id=search-input-mobile>
<a href=javascript:void(0); class="search-button search-toggle" id=search-toggle-mobile title=搜索><i class="fa-solid fa-search fa-fw" aria-hidden=true></i>
</a><a href=javascript:void(0); class="search-button search-clear" id=search-clear-mobile title=清空><i class="fa-solid fa-times-circle fa-fw" aria-hidden=true></i>
</a><span class="search-button search-loading" id=search-loading-mobile><i class="fa-solid fa-spinner fa-fw fa-spin" aria-hidden=true></i></span></div><a href=javascript:void(0); class=search-cancel id=search-cancel-mobile>取消</a></li><li class=menu-item><span class=nested-item><a class=menu-link href=/archives/><i class="fa-solid fa-feather fa-fw fa-sm" aria-hidden=true></i> 文章</a>
<i class="dropdown-icon fa-solid fa-chevron-right" aria-hidden=true></i></span><ul class=sub-menu><li class=menu-item><a class=menu-link href=/categories/><i class="fa-solid fa-folder-tree fa-fw fa-sm" aria-hidden=true></i> 分类</a></li><li class=menu-item><a class=menu-link href=/collections/><i class="fa-solid fa-layer-group fa-fw fa-sm" aria-hidden=true></i> 合集</a></li><li class=menu-item><a class=menu-link href=/tags/><i class="fa-solid fa-tags fa-fw fa-sm" aria-hidden=true></i> 标签</a></li></ul></li><li class=menu-item><a class=menu-link href=/friends/ title=友情链接><i class="fa-solid fa-users-viewfinder fa-fw fa-sm" aria-hidden=true></i> 友链</a></li><li class=menu-item><a class=menu-link href=/guestbook/><i class="fa-regular fa-comments fa-fw fa-sm" aria-hidden=true></i> 留言</a></li><li class=menu-item><span class=nested-item><a class=menu-link href=/about/><i class="fa-solid fa-quote-left fa-fw fa-sm" aria-hidden=true></i> 关于</a>
<i class="dropdown-icon fa-solid fa-chevron-right" aria-hidden=true></i></span><ul class=sub-menu><li class=menu-item><a class=menu-link href=/projects/ title=我的作品集><i class="fa-solid fa-laptop-code fa-fw fa-sm" aria-hidden=true></i> 我的作品</a></li></ul></li><li class="menu-item text-center"><a class=menu-link href=https://github.com/Lruihao/hugo-blog title=GitHub rel="noopener noreferrer" target=_blank><i class="fa-brands fa-github fa-lg fa-fw fa-sm" aria-hidden=true></i> 关注 Follow</a></li><li class="menu-item menu-system"><span class="menu-system-item theme-switch" title=切换主题><i class="fa-solid fa-adjust fa-fw" aria-hidden=true></i></span></li></ul></nav></div></header><div class="search-dropdown desktop"><div id=search-dropdown-desktop></div></div><div class="search-dropdown mobile"><div id=search-dropdown-mobile></div></div><nav aria-label=breadcrumb class="breadcrumb-container sticky"><ol class=breadcrumb><li class=breadcrumb-item data-separator=/><a href=/posts/ title=Posts>文章</a></li><li class="breadcrumb-item active" data-separator=/ aria-current=page>Zephyr教程-环境配置</li></ol></nav><main class=container><aside class="aside-collection animate__animated animate__fadeIn animate__faster" aria-label=合集></aside><article class="page single"><div class=header><h1 class="single-title animate__animated animate__flipInX"><span>Zephyr教程-环境配置</span></h1><p class="single-subtitle animate__animated animate__fadeIn">zephyr 环境，依赖于 CMake, Python3, dts 三个软件，开发过程与 Linux 类似，但是可以在低容量单片机运行。</p></div><div class=post-meta><div class=post-meta-line><span class=post-author><span class=author><i class="fa-solid fa-user-circle" aria-hidden=true></i>
Anonymous</span></span><span class=post-included-in>&nbsp;收录于 <a href=/categories/zephyr/ class=post-category title="分类 - zephyr"><i class="fa-regular fa-folder fa-fw" aria-hidden=true></i> zephyr</a></span></div><div class=post-meta-line><span title="发布于 2025-02-04 22:08:09"><i class="fa-solid fa-calendar-days fa-fw me-1" aria-hidden=true></i><time datetime=2025-02-04>2025-02-04</time></span>&nbsp;<span title="更新于 2025-03-06 00:35:41"><i class="fa-regular fa-calendar-check fa-fw me-1" aria-hidden=true></i><time datetime=2025-03-06>2025-03-06</time></span>&nbsp;<span title="1156 字"><i class="fa-solid fa-pencil-alt fa-fw me-1" aria-hidden=true></i>约 1200 字</span>&nbsp;<span><i class="fa-regular fa-clock fa-fw me-1" aria-hidden=true></i>预计阅读 3 分钟</span>&nbsp;<span id=busuanzi_container_page_pv class="busuanzi_visitors comment-visitors" data-flag-title=Zephyr教程-环境配置><i class="fa-regular fa-eye fa-fw me-1" aria-hidden=true></i><span id=busuanzi_value_page_pv>-</span>&nbsp;次阅读
</span>&nbsp;</div></div><div class=content id=content data-end-flag=（本文完）><div class="details admonition quote"><div class="details-summary admonition-title"><i class="icon fa-fw fa-solid fa-quote-right" aria-hidden=true></i>quote<i class="details-icon fa-solid fa-angle-right fa-fw" aria-hidden=true></i></div><div class=details-content><div class=admonition-content>zephyr 是一个类 Linux 的开发方式， 其工程由 Linux 基金会管理。</div></div></div><ol><li>Zephyr 项目介绍
Zephyr项目是一个Linux基金会托管的协作项目，一个开源合作项目，联合了业内领先企业，为所有资源受限设备构建了针对资源受限设备进行优化的最佳小型可扩展实时操作系统（RTOS）。</li></ol><blockquote><p>Zephyr 主页
<a href=https://github.com/zephyrproject-rtos/zephyr target=_blank rel="external nofollow noopener noreferrer">zephyrproject-rtos/zephyr:<i class="fa-solid fa-external-link-alt fa-fw fa-xs ms-1 text-secondary" aria-hidden=true></i></a>
Zephyr 官网
<a href=https://docs.zephyrproject.org target=_blank rel="external nofollow noopener noreferrer">docs.zephyrproject.org<i class="fa-solid fa-external-link-alt fa-fw fa-xs ms-1 text-secondary" aria-hidden=true></i></a></p></blockquote><ol start=2><li>安装 Ubuntu 环境</li></ol><p>Ubuntu安装可以分为两种方式：物理机与虚拟机。
物理机安装：在电脑硬盘上重新安装一个新的 Ubuntu 镜像，每次开机可以选择是否启动 Ubuntu 系统。
虚拟机安装：在 Windows 系统中，安装 Vmware 软件，由软件虚拟出一个“电脑”，安装 Ubuntu ，可以和 Windows 同时启动。</p><p>我们选择第二种，使用虚拟机的方式，安装 <a href=https://cn.ubuntu.com/download/server/step1 target=_blank rel="external nofollow noopener noreferrer">Ubuntu Server 24.04 LTS<i class="fa-solid fa-external-link-alt fa-fw fa-xs ms-1 text-secondary" aria-hidden=true></i></a>。 安装教程，可以参考 <a href=https://blog.csdn.net/qingzhumuqingfeng/article/details/144011787 target=_blank rel="external nofollow noopener noreferrer">VMware安装ubuntu-24.04-live-server服务版超详细教程_ubuntu 24.04 live server-CSDN博客<i class="fa-solid fa-external-link-alt fa-fw fa-xs ms-1 text-secondary" aria-hidden=true></i></a></p><p>由于 Ubuntu Server 没有界面，所以我选择使用 VS Code 的 SSH 插件，在 Windows 上进行开发。</p><blockquote><p>VS Code 配置</p><ol><li>VS Code 插件库内搜索 《Remote - SSH》并安装。</li><li>按下 Ctrl+Shift+P 选择 Remote-SSH， 并填写 Ubuntu 的 IP 地址、用户名、密码。
<img loading=lazy src=/posts/e3e350c/img/%E5%91%BD%E4%BB%A4%E7%AA%97%E5%8F%A3.png alt=命令窗口 srcset="/posts/e3e350c/img/%E5%91%BD%E4%BB%A4%E7%AA%97%E5%8F%A3.png?size=small, /posts/e3e350c/img/%E5%91%BD%E4%BB%A4%E7%AA%97%E5%8F%A3.png?size=medium 1.5x, /posts/e3e350c/img/%E5%91%BD%E4%BB%A4%E7%AA%97%E5%8F%A3.png?size=large 2x" data-title=命令窗口 style="--width:1029px;--aspect-ratio:1029 / 216;background:url(/images/loading.min.svg)no-repeat 50%" onload='this.title=this.dataset.title;for(const e of["style","data-title","onerror","onload"])this.removeAttribute(e);this.dataset.lazyloaded=""' onerror='this.title=this.dataset.title;for(const e of["style","data-title","onerror","onload"])this.removeAttribute(e)'>
<img loading=lazy src=/posts/e3e350c/img/%E8%BE%93%E5%85%A5%E5%AF%86%E7%A0%81.png alt=输入密码 srcset="/posts/e3e350c/img/%E8%BE%93%E5%85%A5%E5%AF%86%E7%A0%81.png?size=small, /posts/e3e350c/img/%E8%BE%93%E5%85%A5%E5%AF%86%E7%A0%81.png?size=medium 1.5x, /posts/e3e350c/img/%E8%BE%93%E5%85%A5%E5%AF%86%E7%A0%81.png?size=large 2x" data-title=输入密码 style="--width:741px;--aspect-ratio:741 / 104;background:url(/images/loading.min.svg)no-repeat 50%" onload='this.title=this.dataset.title;for(const e of["style","data-title","onerror","onload"])this.removeAttribute(e);this.dataset.lazyloaded=""' onerror='this.title=this.dataset.title;for(const e of["style","data-title","onerror","onload"])this.removeAttribute(e)'></li><li>打开终端窗口，就可以看到已经进入 Ubuntu 系统了。
<img loading=lazy src=/posts/e3e350c/img/%E7%BB%88%E7%AB%AF.png alt=终端 srcset="/posts/e3e350c/img/%E7%BB%88%E7%AB%AF.png?size=small, /posts/e3e350c/img/%E7%BB%88%E7%AB%AF.png?size=medium 1.5x, /posts/e3e350c/img/%E7%BB%88%E7%AB%AF.png?size=large 2x" data-title=终端 style="--width:988px;--aspect-ratio:988 / 250;background:url(/images/loading.min.svg)no-repeat 50%" onload='this.title=this.dataset.title;for(const e of["style","data-title","onerror","onload"])this.removeAttribute(e);this.dataset.lazyloaded=""' onerror='this.title=this.dataset.title;for(const e of["style","data-title","onerror","onload"])this.removeAttribute(e)'></li></ol></blockquote><ol start=3><li>配置 Zephyr 环境</li></ol><p>可以参考 <a href=https://docs.zephyrproject.org target=_blank rel="external nofollow noopener noreferrer">docs.zephyrproject.org<i class="fa-solid fa-external-link-alt fa-fw fa-xs ms-1 text-secondary" aria-hidden=true></i></a> 的官方教程，或者按照下面命令依次安装。</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt> 1
</span><span class=lnt> 2
</span><span class=lnt> 3
</span><span class=lnt> 4
</span><span class=lnt> 5
</span><span class=lnt> 6
</span><span class=lnt> 7
</span><span class=lnt> 8
</span><span class=lnt> 9
</span><span class=lnt>10
</span><span class=lnt>11
</span><span class=lnt>12
</span><span class=lnt>13
</span><span class=lnt>14
</span><span class=lnt>15
</span><span class=lnt>16
</span><span class=lnt>17
</span><span class=lnt>18
</span><span class=lnt>19
</span><span class=lnt>20
</span><span class=lnt>21
</span><span class=lnt>22
</span><span class=lnt>23
</span><span class=lnt>24
</span><span class=lnt>25
</span><span class=lnt>26
</span><span class=lnt>27
</span><span class=lnt>28
</span><span class=lnt>29
</span><span class=lnt>30
</span><span class=lnt>31
</span><span class=lnt>32
</span><span class=lnt>33
</span><span class=lnt>34
</span><span class=lnt>35
</span><span class=lnt>36
</span><span class=lnt>37
</span><span class=lnt>38
</span><span class=lnt>39
</span><span class=lnt>40
</span><span class=lnt>41
</span><span class=lnt>42
</span><span class=lnt>43
</span><span class=lnt>44
</span><span class=lnt>45
</span><span class=lnt>46
</span><span class=lnt>47
</span><span class=lnt>48
</span><span class=lnt>49
</span><span class=lnt>50
</span><span class=lnt>51
</span><span class=lnt>52
</span><span class=lnt>53
</span><span class=lnt>54
</span><span class=lnt>55
</span><span class=lnt>56
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-shell data-lang=shell><span class=line><span class=cl><span class=c1># 安装 Zephyr 所依赖的本地环境和软件</span>
</span></span><span class=line><span class=cl>sudo apt install cmake python3 device-tree-compiler 
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1># 检查软件是否已经安装成功</span>
</span></span><span class=line><span class=cl>cmake --version
</span></span><span class=line><span class=cl>python3 --version
</span></span><span class=line><span class=cl>dtc --version
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1># 安装 python 虚拟环境</span>
</span></span><span class=line><span class=cl>pip3 install virtualenv
</span></span><span class=line><span class=cl>pip3 install virtualenvwrapper
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1># 创建虚拟环境配置保存目录，并设置环境变量</span>
</span></span><span class=line><span class=cl>mkdir <span class=nv>$HOME</span>/.virtualenvs
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>sudo vim ~/.zshrc
</span></span><span class=line><span class=cl><span class=nb>export</span> <span class=nv>WORKON_HOME</span><span class=o>=</span><span class=nv>$HOME</span>/.virtualenvs 
</span></span><span class=line><span class=cl><span class=nb>export</span> <span class=nv>VIRTUALENVWRAPPER_PYTHON</span><span class=o>=</span>/usr/bin/python3.10 <span class=c1># 根据你的Python路径修改 </span>
</span></span><span class=line><span class=cl><span class=nb>source</span> /usr/local/bin/virtualenvwrapper.sh <span class=c1># 路径根据virtualenvwrapper 安装路径修改</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1># 创建虚拟环境，并指定 python 版本</span>
</span></span><span class=line><span class=cl>mkvirtualenv -p /usr/bin/python3 env_zephyr
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1># 激活虚拟环境</span>
</span></span><span class=line><span class=cl>workon env_zephyr
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1># 使用 pip 安装 west 构建软件，后续用来编译 Zephyr 工程</span>
</span></span><span class=line><span class=cl>pip install west
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1># 初始化 Zephyr 工作目录</span>
</span></span><span class=line><span class=cl>west init ~/zephyrproject
</span></span><span class=line><span class=cl><span class=nb>cd</span> ~/zephyrproject
</span></span><span class=line><span class=cl><span class=c1># 更新软件</span>
</span></span><span class=line><span class=cl>west update
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1># 指定编译器方式有两种： 使用 Zephyr 指定的版本，自定义编译器版本</span>
</span></span><span class=line><span class=cl><span class=c1># 1. 使用 Zephyr 指定版本</span>
</span></span><span class=line><span class=cl><span class=c1># 如果没有 .zephyrrc 则需要自己创建</span>
</span></span><span class=line><span class=cl>vim ~/.zephyrrc 
</span></span><span class=line><span class=cl><span class=nb>export</span> <span class=nv>ZEPHYR_TOOLCHAIN_VARIANT</span><span class=o>=</span>zephyr
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1># 2. 如果使用 ARM 芯片，可以手动指定 gnu arm，以及指定工具链路径</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>vim ~/.zephyrrc
</span></span><span class=line><span class=cl><span class=nb>export</span> <span class=nv>ZEPHYR_TOOLCHAIN_VARIANT</span><span class=o>=</span>gnuarmemb
</span></span><span class=line><span class=cl><span class=nb>export</span> <span class=nv>GNUARMEMB_TOOLCHAIN_PATH</span><span class=o>=</span>/usr/arm-none-eabi  <span class=c1>#  执行本地的 arm-none-eabi 路径，该路径下有 bin 文件夹</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1># 如果使用 west build 编译报错找不到 ninja，则需要安装 ninja 环境。</span>
</span></span><span class=line><span class=cl>apt install ninja-build
</span></span><span class=line><span class=cl><span class=c1># ninja --verion </span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1># 全部更新完成之后的软件列表如下：</span>
</span></span><span class=line><span class=cl>&gt; ls
</span></span><span class=line><span class=cl>bootloader  modules  tools  zephyr</span></span></code></pre></td></tr></table></div></div><ol start=4><li>测试编译速度</li></ol><p>在 <code>~/zephyrproject</code> 路径下，执行 <code>time west build -b stm32f103_mini zephyr/samples/hello_world --build-dir build/stm32f103_mini</code>。</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt> 1
</span><span class=lnt> 2
</span><span class=lnt> 3
</span><span class=lnt> 4
</span><span class=lnt> 5
</span><span class=lnt> 6
</span><span class=lnt> 7
</span><span class=lnt> 8
</span><span class=lnt> 9
</span><span class=lnt>10
</span><span class=lnt>11
</span><span class=lnt>12
</span><span class=lnt>13
</span><span class=lnt>14
</span><span class=lnt>15
</span><span class=lnt>16
</span><span class=lnt>17
</span><span class=lnt>18
</span><span class=lnt>19
</span><span class=lnt>20
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-shell data-lang=shell><span class=line><span class=cl><span class=c1># 进入 zephyr 工作目录</span>
</span></span><span class=line><span class=cl>&gt; <span class=nb>cd</span> ~/zephyrproject
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1># 切换 python 虚拟环境，如果之前已经进入，则不需要这个步骤。</span>
</span></span><span class=line><span class=cl><span class=c1># 一般会有报错： 无法找到 west 软件</span>
</span></span><span class=line><span class=cl>&gt; workon env_zephyr
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1># -b : 执行控制器</span>
</span></span><span class=line><span class=cl><span class=c1># zephyr/samples/hello_world  需要编译的应用</span>
</span></span><span class=line><span class=cl><span class=c1># --build-dir build/stm32f103_mini  指定编译结果保存路径 也可以使用 -d build/stm32f103_mini</span>
</span></span><span class=line><span class=cl>&gt; <span class=nb>time</span> west build -b stm32f103_mini zephyr/samples/hello_world --build-dir build/stm32f103_mini
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1># 编译正常完成。共用时 20.921 秒</span>
</span></span><span class=line><span class=cl><span class=o>[</span>135/135<span class=o>]</span> Linking C executable zephyr/zephyr.elf
</span></span><span class=line><span class=cl>Memory region         Used Size  Region Size  %age Used
</span></span><span class=line><span class=cl>           FLASH:       <span class=m>12854</span> B       <span class=m>256</span> KB      4.90%
</span></span><span class=line><span class=cl>             RAM:        <span class=m>4160</span> B        <span class=m>48</span> KB      8.46%
</span></span><span class=line><span class=cl>        IDT_LIST:          <span class=m>0</span> GB        <span class=m>32</span> KB      0.00%
</span></span><span class=line><span class=cl>Generating files from /home/liyuhang/zephyrproject/build/stm32f103_mini/zephyr/zephyr.elf <span class=k>for</span> board: stm32f103_mini
</span></span><span class=line><span class=cl>west build -b stm32f103_mini zephyr/samples/hello_world --build-dir   35.57s user 15.28s system 243% cpu 20.921 total</span></span></code></pre></td></tr></table></div></div><p>至此，Zephyr 基础环境配置工作已经完成。</p></div><hr class=awesome-hr><h2 id=see-also>相关内容</h2><ul><li><a href=/posts/can-protocol/ title=CAN协议>CAN协议</a></li></ul><div class=post-reward><div class=comment>Buy me a coffee~</div><input type=checkbox class=reward-input name=reward id=fi-reward hidden>
<label class=reward-button for=fi-reward><i class="fa-solid fa-qrcode fa-fw" aria-hidden=true></i>赞赏</label><div class=reward-ways data-mode=fixed></div></div><div class=post-footer id=post-footer><div class=post-info><div class=post-info-line><div class=post-info-mod><span title="更新于 2025-03-06 00:35:41">更新于 2025-03-06&nbsp;</span></div></div><div class=post-info-line><div class=post-info-md><span><a href=/posts/e3e350c/index.md title=阅读原始文档 class=link-to-markdown>阅读原始文档</a></span><span><a href="https://github.com/yuhanglee/yuhanglee.github.io/blob/main//posts/2025/zephyr%e6%95%99%e7%a8%8b/study/1-day/index.md?plain=1" title=查看源码 target=_blank rel="external nofollow noopener noreferrer" class=link-to-source>查看源码</a></span><span><a href=https://github.com/yuhanglee/yuhanglee.github.io/edit/main//posts/2025/zephyr%e6%95%99%e7%a8%8b/study/1-day/index.md title=编辑此页 target=_blank rel="external nofollow noopener noreferrer" class=link-to-edit>编辑此页</a></span><span><a href="https://github.com/yuhanglee/yuhanglee.github.io/issues/new?title=[BUG]%20zephyr%E6%95%99%E7%A8%8B-%E7%8E%AF%E5%A2%83%E9%85%8D%E7%BD%AE&amp;body=%7cField%7cValue%7c%0A%7c-%7c-%7c%0A%7cTitle%7czephyr%E6%95%99%E7%A8%8B-%E7%8E%AF%E5%A2%83%E9%85%8D%E7%BD%AE%7c%0A%7cURL%7chttps://yuhanglee.github.io/posts/e3e350c/%7c%0A%7cFilename%7chttps://github.com/yuhanglee/yuhanglee.github.io/blob/main//posts/2025/zephyr%e6%95%99%e7%a8%8b/study/1-day/index.md?plain=1%7c" title=报告问题 target=_blank rel="external nofollow noopener noreferrer" class=link-to-report>报告问题</a></span></div><div class=post-info-share><span><a href=javascript:void(0); title="分享到 X" data-sharer=twitter data-url=https://yuhanglee.github.io/posts/e3e350c/ data-title=Zephyr教程-环境配置 data-hashtags=教程><i class="fa-brands fa-x-twitter fa-fw" aria-hidden=true></i></a>
<a href=javascript:void(0); title="分享到 Facebook" data-sharer=facebook data-url=https://yuhanglee.github.io/posts/e3e350c/ data-hashtag=教程><i class="fa-brands fa-facebook-square fa-fw" aria-hidden=true></i></a>
<a href=javascript:void(0); title="分享到 Linkedin" data-sharer=linkedin data-url=https://yuhanglee.github.io/posts/e3e350c/><i class="fa-brands fa-linkedin fa-fw" aria-hidden=true></i></a>
<a href=javascript:void(0); title="分享到 微博" data-sharer=weibo data-url=https://yuhanglee.github.io/posts/e3e350c/ data-title=Zephyr教程-环境配置><i class="fa-brands fa-weibo fa-fw" aria-hidden=true></i></a>
<a href=javascript:void(0); title="分享到 百度" data-sharer=baidu data-url=https://yuhanglee.github.io/posts/e3e350c/ data-title=Zephyr教程-环境配置><i data-svg-src=https://unpkg.com/simple-icons@9.19.0/icons/baidu.svg aria-hidden=true></i></a></span></div></div></div><div class=post-info-more><section class=post-tags><i class="fa-solid fa-tags fa-fw me-1" aria-hidden=true></i><a href=/tags/%E6%95%99%E7%A8%8B/ class=post-tag title="标签 - 教程">教程</a></section><section><span><a href=javascript:void(0); onclick=window.history.back()>返回</a></span>&nbsp;|&nbsp;<span><a href=/>主页</a></span></section></div><div class=post-nav><a href=/posts/b234ee6/ class=post-nav-item rel=prev title="RTT 启动顺序"><i class="fa-solid fa-angle-left fa-fw" aria-hidden=true></i>RTT 启动顺序</a></div></div></article><aside class=toc id=toc-auto aria-label=目录></aside></main><footer class=footer><div class=footer-container><div class="footer-line powered order-1">由 <a href=https://gohugo.io/ target=_blank rel="external nofollow noopener noreferrer" title="Hugo 0.145.0"><img class=hugo-icon src=/images/hugo.min.svg alt="Hugo logo"> Hugo</a> 强力驱动 | 主题 - <a href=https://github.com/hugo-fixit/FixIt target=_blank rel=external title="FixIt v0.3.17-8b402129"><img class=fixit-icon src=/images/fixit.min.svg alt="FixIt logo"> FixIt</a></div><div class="footer-line copyright order-2" itemscope itemtype=http://schema.org/CreativeWork><i class="fa-regular fa-copyright fa-fw" aria-hidden=true></i>
<span itemprop=copyrightYear>2024 - 2025</span><span class=author itemprop=copyrightHolder>
<a href=https://github.com/yuhanglee target=_blank rel="external nofollow noopener noreferrer">liyuhang</a></span><span class="license footer-divider"><a rel="license external nofollow noopener noreferrer" href=https://creativecommons.org/licenses/by-nc-sa/4.0/ target=_blank>CC BY-NC-SA 4.0</a></span></div><div class="footer-line statistics"><span class=site-time title=网站运行中……><i class="fa-solid fa-heartbeat fa-fw animate-icon" aria-hidden=true></i><span class="ms-1 d-none">博客已运行</span><span class="run-times ms-1">网站运行中……</span></span></div><div class="footer-line visitor order-first"><span id=busuanzi_container_site_uv title=总访客数><i class="fa-regular fa-user fa-fw me-1" aria-hidden=true></i><span id=busuanzi_value_site_uv><i class="fa-solid fa-spinner fa-spin fa-fw" aria-hidden=true></i></span></span><span id=busuanzi_container_site_pv class=footer-divider title=总访问量><i class="fa-regular fa-eye fa-fw me-1" aria-hidden=true></i><span id=busuanzi_value_site_pv><i class="fa-solid fa-spinner fa-spin fa-fw" aria-hidden=true></i></span></span></div></div></footer></div><div class=widgets><div class="fixed-buttons animate__faster d-none"><div class="fixed-button back-to-top" role=button aria-label=回到顶部><i class="fa-solid fa-arrow-up fa-fw" aria-hidden=true></i><span class=variant-numeric>0%</span></div></div><a href=https://github.com/yuhanglee/yuhanglee.github.io title="在 GitHub 上查看项目" target=_blank rel="external nofollow" class="github-corner right d-none-mobile"><svg viewBox="0 0 250 250" aria-hidden="true" width="56" height="56"><path d="M0 0 115 115h15l12 27L250 250V0z"/><path d="M128.3 109C113.8 99.7 119 89.6 119 89.6 122 82.7 120.5 78.6 120.5 78.6 119.2 72 123.4 76.3 123.4 76.3 127.3 80.9 125.5 87.3 125.5 87.3 122.9 97.6 130.6 101.9 134.4 103.2" fill="currentcolor" style="transform-origin:130px 106px" class="octo-arm"/><path d="M115 115C114.9 115.1 118.7 116.5 119.8 115.4l13.9-13.8C136.9 99.2 139.9 98.4 142.2 98.6 133.8 88 127.5 74.4 143.8 58 148.5 53.4 154 51.2 159.7 51 160.3 49.4 163.2 43.6 171.4 40.1 171.4 40.1 176.1 42.5 178.8 56.2 183.1 58.6 187.2 61.8 190.9 65.4 194.5 69 197.7 73.2 200.1 77.6 213.8 80.2 216.3 84.9 216.3 84.9 212.7 93.1 206.9 96 205.4 96.6 205.1 102.4 203 107.8 198.3 112.5 181.9 128.9 168.3 122.5 157.7 114.1 157.9 116.9 156.7 120.9 152.7 124.9L141 136.5C139.8 137.7 141.6 141.9 141.8 141.8z" fill="currentcolor" class="octo-body"/></svg></a><div id=mask></div><div class=reading-progress-bar style=left:0;top:0;--bg-progress:#8581dd;--bg-progress-dark:#fff></div><noscript><div class=noscript-warning>该网站在启用 JavaScript 的情况下效果最佳。</div></noscript></div><link rel=stylesheet href=https://unpkg.com/cookieconsent@3.1.1/build/cookieconsent.min.css><link rel=stylesheet href=https://unpkg.com/pace-js@1.2.4/themes/blue/pace-theme-minimal.css><script src="https://cdnjs.cloudflare.com/polyfill/v3/polyfill.js?features=Array.prototype.fill%2CArray.prototype.find%2CArray.from%2CIntersectionObserver%2CMath.sign%2CObject.assign%2CPromise%2CObject.entries%2Chtml5shiv%2CObject.values%2Cfetch%2CElement.prototype.after"></script><script src=https://unpkg.com/autocomplete.js@0.38.1/dist/autocomplete.min.js defer></script><script src=https://unpkg.com/algoliasearch@4.20.0/dist/algoliasearch-lite.umd.js defer></script><script src=https://unpkg.com/instant.page@5.2.0/instantpage.js async defer type=module></script><script src=https://unpkg.com/sharer.js@0.5.1/sharer.min.js async defer></script><script src=https://unpkg.com/cookieconsent@3.1.1/build/cookieconsent.min.js defer></script><script src=https://unpkg.com/pangu@4.0.7/dist/browser/pangu.min.js defer></script><script src=https://unpkg.com/cell-watermark@1.0.3/src/watermark.min.js defer></script><script src=https://vercount.one/js async defer></script><script src=https://unpkg.com/pace-js@1.2.4/pace.min.js async defer></script><script>window.config={autoBookmark:!0,code:{copyTitle:"复制到剪贴板",editLockTitle:"锁定可编辑代码块",editUnLockTitle:"解锁可编辑代码块",editable:!0,maxShownLines:50},comment:{enable:!1},cookieconsent:{content:{dismiss:"同意",link:"了解更多",message:"本网站使用 Cookies 来改善您的浏览体验。"},enable:!0,palette:{button:{background:"#f0f0f0"},popup:{background:"#1aa3ff"}},theme:"edgeless"},enablePWA:!0,pangu:{enable:!0,selector:"article"},search:{algoliaAppID:"V359M52V1P",algoliaIndex:"hugo",algoliaSearchKey:"9e9413e3f0ea350e8c105a0d97e38486",highlightTag:"em",maxResultLength:10,noResultsFound:"没有找到结果",snippetLength:50,type:"algolia"},siteTime:"2024-05-01T00:00:00+08:00",version:"v0.3.17-8b402129",watermark:{colspacing:30,content:'<img style="height: 0.85rem;" src="/logo.webp" alt="logo" /> Mask',enable:!0,fontfamily:"MMT_LRH,沐目体",fontsize:1.1,height:20,opacity:.0125,rotate:15,rowspacing:60,width:150}}</script><script src=/js/theme.min.js defer></script><script src=/js/custom.min.js defer></script><script async defer data-website-id=4049c0b0-87c9-4573-8ae5-d84449e40e05 src=https://cloud.umami.is/script.js></script></body></html>