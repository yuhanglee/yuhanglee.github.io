<rss xmlns:atom="http://www.w3.org/2005/Atom" version="2.0"><channel><title>教程 - 标签 | 博客</title><link>https://yuhanglee.github.io/tags/%E6%95%99%E7%A8%8B/</link><description>教程 - 标签 | 博客</description><generator>Hugo -- gohugo.io</generator><language>zh-CN</language><copyright>本站内容采用 CC BY-NC-SA 4.0 国际许可协议。</copyright><lastBuildDate>Sun, 19 May 2024 00:00:00 +0000</lastBuildDate><atom:link href="https://yuhanglee.github.io/tags/%E6%95%99%E7%A8%8B/" rel="self" type="application/rss+xml"/><item><title>CAN协议</title><link>https://yuhanglee.github.io/posts/can-protocol/</link><pubDate>Sun, 19 May 2024 00:00:00 +0000</pubDate><author>liyuhang</author><guid>https://yuhanglee.github.io/posts/can-protocol/</guid><description><![CDATA[<h1 id="can总线定义" class="heading-element"><span>CAN总线定义</span>
  <a href="#can%e6%80%bb%e7%ba%bf%e5%ae%9a%e4%b9%89" class="heading-mark">
    <svg class="octicon octicon-link" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path d="m7.775 3.275 1.25-1.25a3.5 3.5 0 1 1 4.95 4.95l-2.5 2.5a3.5 3.5 0 0 1-4.95 0 .751.751 0 0 1 .018-1.042.751.751 0 0 1 1.042-.018 1.998 1.998 0 0 0 2.83 0l2.5-2.5a2.002 2.002 0 0 0-2.83-2.83l-1.25 1.25a.751.751 0 0 1-1.042-.018.751.751 0 0 1-.018-1.042Zm-4.69 9.64a1.998 1.998 0 0 0 2.83 0l1.25-1.25a.751.751 0 0 1 1.042.018.751.751 0 0 1 .018 1.042l-1.25 1.25a3.5 3.5 0 1 1-4.95-4.95l2.5-2.5a3.5 3.5 0 0 1 4.95 0 .751.751 0 0 1-.018 1.042.751.751 0 0 1-1.042.018 1.998 1.998 0 0 0-2.83 0l-2.5 2.5a1.998 1.998 0 0 0 0 2.83Z"></path></svg>
  </a>
</h1><p><a class="lightgallery" href="images/CAN-bus.jpg?size=large" data-thumbnail="images/CAN-bus.jpg?size=small" data-sub-html="<h2>can协议</h2>"><img loading="lazy" src="images/CAN-bus.jpg" alt="can协议" srcset="images/CAN-bus.jpg?size=small, images/CAN-bus.jpg?size=medium 1.5x, images/CAN-bus.jpg?size=large 2x" data-title="can协议" style="background: url(/images/loading.min.svg) no-repeat center;" onload="this.title=this.dataset.title;for(const i of ['style', 'data-title','onerror','onload']){this.removeAttribute(i);}this.dataset.lazyloaded='';" onerror="this.title=this.dataset.title;for(const i of ['style', 'data-title','onerror','onload']){this.removeAttribute(i);}"/></a></p>
<p>一直都说，CAN总线是汽车上最重要的总线接口之一。那么，CAN总线是什么呢？</p>
<blockquote>
<p>什么是CAN总线?</p>
</blockquote>
<p>你的汽车就像一个人的身体:控制器区域网络(CAN总线)是神经系统，实现通信。反过来，“节点”或“电子控制单元”(ecu)就像身体的一部分，通过CAN总线相互连接。一部分感知到的信息可以与另一部分共享。</p>
<p><figure><a class="lightgallery" href="images/CAR&amp;BUS.jpg?size=large" data-thumbnail="images/CAR&amp;BUS.jpg?size=small" data-sub-html="<h2>can总线</h2><p>hello</p>"><img loading="lazy" src="images/CAR&amp;BUS.jpg" alt="can总线" srcset="images/CAR&amp;BUS.jpg?size=small, images/CAR&amp;BUS.jpg?size=medium 1.5x, images/CAR&amp;BUS.jpg?size=large 2x" data-title="hello" style="background: url(/images/loading.min.svg) no-repeat center;" onload="this.title=this.dataset.title;for(const i of ['style', 'data-title','onerror','onload']){this.removeAttribute(i);}this.dataset.lazyloaded='';" onerror="this.title=this.dataset.title;for(const i of ['style', 'data-title','onerror','onload']){this.removeAttribute(i);}"/></a><figcaption class="image-caption">can总线</figcaption>
  </figure></p>
<blockquote>
<p>什么是ECU</p>
</blockquote>
<p>在汽车CAN总线系统中，ECU可以是发动机控制单元、安全气囊、音响系统等。一辆现代汽车可能有多个ECU，每个ECU都有可能需要与其他网络部分共享的信息。</p>
<p><a class="lightgallery" href="images/ECU_Trans.png?size=large" data-thumbnail="images/ECU_Trans.png?size=small" data-sub-html="<h2>ECU</h2>"><img loading="lazy" src="images/ECU_Trans.png" alt="ECU" srcset="images/ECU_Trans.png?size=small, images/ECU_Trans.png?size=medium 1.5x, images/ECU_Trans.png?size=large 2x" data-title="ECU" style="background: url(/images/loading.min.svg) no-repeat center;" onload="this.title=this.dataset.title;for(const i of ['style', 'data-title','onerror','onload']){this.removeAttribute(i);}this.dataset.lazyloaded='';" onerror="this.title=this.dataset.title;for(const i of ['style', 'data-title','onerror','onload']){this.removeAttribute(i);}"/></a></p>
<p>这就是CAN标准排得上用场的地方：</p>
<ul>
<li>CAN总线可以连接多个ECU，并进行通信</li>
<li>使用双绞线，无复杂的专用布线，网络拓展性强</li>
<li>支持仲裁和抢占，以及可以报告错误帧</li>
<li>支持一对一和一对多通信</li>
</ul>
<h1 id="osi网络" class="heading-element"><span>OSI网络</span>
  <a href="#osi%e7%bd%91%e7%bb%9c" class="heading-mark">
    <svg class="octicon octicon-link" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path d="m7.775 3.275 1.25-1.25a3.5 3.5 0 1 1 4.95 4.95l-2.5 2.5a3.5 3.5 0 0 1-4.95 0 .751.751 0 0 1 .018-1.042.751.751 0 0 1 1.042-.018 1.998 1.998 0 0 0 2.83 0l2.5-2.5a2.002 2.002 0 0 0-2.83-2.83l-1.25 1.25a.751.751 0 0 1-1.042-.018.751.751 0 0 1-.018-1.042Zm-4.69 9.64a1.998 1.998 0 0 0 2.83 0l1.25-1.25a.751.751 0 0 1 1.042.018.751.751 0 0 1 .018 1.042l-1.25 1.25a3.5 3.5 0 1 1-4.95-4.95l2.5-2.5a3.5 3.5 0 0 1 4.95 0 .751.751 0 0 1-.018 1.042.751.751 0 0 1-1.042.018 1.998 1.998 0 0 0-2.83 0l-2.5 2.5a1.998 1.998 0 0 0 0 2.83Z"></path></svg>
  </a>
</h1><p>用更专业的术语来说，CAN(controller area network)是由数据链路层和物理层来描述，在高速CAN中，<code>ISO 11898-1</code> 描述了数据链路层，<code>ISO 11898-2</code> 描述了物理层，如图所示，CAN的作用经常出现在7层OSI中。</p>
<p>CAN总线物理层定义了电路类型、电信号水平、节点要求、电缆阻抗等。例如：<code>ISO 11898-2</code>规定了许多事情，包括以下内容</p>
<ul>
<li>波特率： CAN节点必须使用两根绞线相连，经典CAN最高可以达到1Mbps，CANFD数据域最高可以达到5Mbps</li>
<li>电缆长度： 最大的长度可以达到 500米（125Kbps）或者40米（1Mbps）</li>
<li>终端： CAN总线两端必须都正确的使用120欧姆终端电阻</li>
</ul>
<p><a class="lightgallery" href="images/OSI-layer.png?size=large" data-thumbnail="images/OSI-layer.png?size=small" data-sub-html="<h2>OSI分层</h2>"><img loading="lazy" src="images/OSI-layer.png" alt="OSI分层" srcset="images/OSI-layer.png?size=small, images/OSI-layer.png?size=medium 1.5x, images/OSI-layer.png?size=large 2x" data-title="OSI分层" style="background: url(/images/loading.min.svg) no-repeat center;" onload="this.title=this.dataset.title;for(const i of ['style', 'data-title','onerror','onload']){this.removeAttribute(i);}this.dataset.lazyloaded='';" onerror="this.title=this.dataset.title;for(const i of ['style', 'data-title','onerror','onload']){this.removeAttribute(i);}"/></a></p>
<h1 id="高速can" class="heading-element"><span>高速CAN</span>
  <a href="#%e9%ab%98%e9%80%9fcan" class="heading-mark">
    <svg class="octicon octicon-link" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path d="m7.775 3.275 1.25-1.25a3.5 3.5 0 1 1 4.95 4.95l-2.5 2.5a3.5 3.5 0 0 1-4.95 0 .751.751 0 0 1 .018-1.042.751.751 0 0 1 1.042-.018 1.998 1.998 0 0 0 2.83 0l2.5-2.5a2.002 2.002 0 0 0-2.83-2.83l-1.25 1.25a.751.751 0 0 1-1.042-.018.751.751 0 0 1-.018-1.042Zm-4.69 9.64a1.998 1.998 0 0 0 2.83 0l1.25-1.25a.751.751 0 0 1 1.042.018.751.751 0 0 1 .018 1.042l-1.25 1.25a3.5 3.5 0 1 1-4.95-4.95l2.5-2.5a3.5 3.5 0 0 1 4.95 0 .751.751 0 0 1-.018 1.042.751.751 0 0 1-1.042.018 1.998 1.998 0 0 0-2.83 0l-2.5 2.5a1.998 1.998 0 0 0 0 2.83Z"></path></svg>
  </a>
</h1><p>在汽车总线的定义中，会经常遇到不同类型的网络：下面我们提供一个简单的概述：</p>
<ul>
<li>高速CAN总线： 本文的重点是高速CAN总线(ISO 11898)。它是迄今为止物理层最流行的CAN标准协议，波特率支持从40Kbps到1Mbps。只需要简单的双绞线，就可以满足简单的汽车应用。还可以作为OBD，J1939，NMEA 2000，CANOpen等高层协议的基础。第二代CAN被称为CANFD，数据域可以最高支持5Mbps。</li>
<li>低速CAN总线： 该标准支持的波特率较低，为40Kbps到125Kbps，且可以允许在两条总线出现故障之后，继续进行通信。因此，也被称为&quot;容错CAN&quot;。</li>
<li>LIN总线： LIN总线是CAN总线的低成本补充，其只需要3根线就可以完成通信，可以进行更加简单的布线和更经济的网络。</li>
<li>以太网： 当今随着新能源的崛起，车辆功能越来越复杂。新能源车辆以支持ADAS(高级驾驶辅助系统)、信息娱乐系统、摄像头等高带宽要求。与CAN总线相比，汽车以太网提供了更高的数据传入速率，但缺乏经典CAN和CAN FD的一些安全/性能的特征。未来一段时间，CAN、CAN FD、CAN XL和以太网基友可能同事应用于新的汽车和工业开发。</li>
</ul>
<h1 id="can总线优点" class="heading-element"><span>CAN总线优点</span>
  <a href="#can%e6%80%bb%e7%ba%bf%e4%bc%98%e7%82%b9" class="heading-mark">
    <svg class="octicon octicon-link" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path d="m7.775 3.275 1.25-1.25a3.5 3.5 0 1 1 4.95 4.95l-2.5 2.5a3.5 3.5 0 0 1-4.95 0 .751.751 0 0 1 .018-1.042.751.751 0 0 1 1.042-.018 1.998 1.998 0 0 0 2.83 0l2.5-2.5a2.002 2.002 0 0 0-2.83-2.83l-1.25 1.25a.751.751 0 0 1-1.042-.018.751.751 0 0 1-.018-1.042Zm-4.69 9.64a1.998 1.998 0 0 0 2.83 0l1.25-1.25a.751.751 0 0 1 1.042.018.751.751 0 0 1 .018 1.042l-1.25 1.25a3.5 3.5 0 1 1-4.95-4.95l2.5-2.5a3.5 3.5 0 0 1 4.95 0 .751.751 0 0 1-.018 1.042.751.751 0 0 1-1.042.018 1.998 1.998 0 0 0-2.83 0l-2.5 2.5a1.998 1.998 0 0 0 0 2.83Z"></path></svg>
  </a>
</h1><p>由于CAN总线具有以下优点，CAN总线标准几乎用于所有车辆和许多场景。</p>
<blockquote>
<p>简单，低成本</p>
</blockquote>
<p>ECU可以通过单个CAN系统进行通信，而不使用更加复杂的模拟信号总线，从而减少了错误、复杂、布线、成本。</p>
<blockquote>
<p>集中</p>
</blockquote>
<p>CAN总线提供了与所有ECU网络通信的入口点，且不分主从，可以进行双向通信，从而实现中央诊断、数据记录和配置。</p>
<blockquote>
<p>健壮</p>
</blockquote>
<p>该系统对电气干扰和电磁干扰具有鲁棒性，是安全关键应用的理想选择</p>
<blockquote>
<p>高效</p>
</blockquote>
<p>CAN具有仲裁性，数据报文可以按照ID确定优先级，以便最高优先级的数据得到立即总线访问，而不会导致其他帧的中断。</p>
]]></description></item></channel></rss>